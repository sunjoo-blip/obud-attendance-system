# TODO: 반반차 추가 개선 사항

## 향후 추가할 기능

### 1. 스마트 추천 시스템
- 같은 날 이미 반반차 신청 시 다른 시간대 추천
- 잔여 연차가 0.25일만 남았을 때 반반차만 활성화
- 가장 많이 사용하는 시간대 우선 표시

### 2. 빠른 선택 기능
- "내일 오전 9시", "금요일 오후 2시" 등 프리셋 버튼
- 최근 신청한 패턴 저장 및 재사용
- 자주 사용하는 시간대 즐겨찾기

### 3. 시각적 개선
- 달력에서 반반차는 작은 점으로 표시
- 같은 날 여러 신청건은 다중 점으로 표시
- 툴팁에 정확한 시간 및 사유 표시
- 반반차 색상을 오전/오후로 구분 (현재는 통일)

### 4. 사용 패턴 분석
- 가장 많이 사용되는 시간대 통계
- 팀별 연차 사용 히트맵
- 월별/분기별 트렌드 분석
- 시간대별 사용률 차트

### 5. 자유 시간 선택 모드
- 사용자가 직접 시작/종료 시간 선택
- 30분 단위로 선택 가능
- 계산: (종료 - 시작) / 9시간 = 연차 사용량
- 최소 1시간, 최대 4시간 제한

### 6. Slack 통합 강화
- 반반차 시간대 자동 상태 변경
- 팀원들에게 부재 시간 알림
- Slack 워크플로우 트리거
- 반반차 신청 시 자동 DM 발송

### 7. 관리자 기능
- 반반차 사용 통계 대시보드
- 시간대별 인원 분포 확인
- 특정 시간대 반반차 제한 설정
- 반반차 승인 정책 설정 (현재는 자동 승인)

### 8. 다중 반반차 신청 지원
- 현재는 하루에 반반차 하나만 가능
- 향후 여러 개 신청 가능하도록 확장
- 시간 겹침 자동 검증
- 같은 날 여러 반반차 조합 시 반차로 자동 변환

---

## 구현 완료된 기능 (v1.0)

✅ DB DECIMAL(5,1) → DECIMAL(5,2) 마이그레이션
✅ 반반차(QUARTER_DAY) 타입 추가
✅ 30분 단위 시간 선택 (09:00~16:00, 점심시간 제외)
✅ 자동 종료 시간 계산 (+2시간)
✅ 하루에 반반차 하나만 신청 제한
✅ 연차 계산 로직 (0.25일)
✅ Google Calendar 통합 (시간 정보 포함)
✅ 프론트엔드 UI (Modal, Calendar, List)
✅ 청록색(cyan) 배지 및 색상 체계

---

## 알려진 이슈

- [ ] 반반차와 반차의 시간 겹침 체크 미구현 (예: 오전 반차 + 오전 전반 반반차)
- [ ] 관리자 페이지에서 반반차 시간 정보 표시 누락 가능성
- [ ] Google Calendar 색상이 모바일에서 다르게 표시될 수 있음

---

## 배포 전 체크리스트

- [ ] DB 마이그레이션 실행 (`database/migrations/001_add_quarter_leave.sql`)
- [ ] 기존 연차 데이터 백업
- [ ] 프로덕션 환경에서 반반차 신청/취소 테스트
- [ ] Google Calendar 동기화 확인
- [ ] 연차 잔액 계산 정확성 검증 (0.25 단위)
- [ ] 중복 신청 방지 로직 테스트
- [ ] 모든 사용자에게 공지

---

## 참고 문서

- 구현 계획: `/Users/sunju/.claude/plans/inherited-noodling-galaxy.md`
- DB 마이그레이션: `/database/migrations/001_add_quarter_leave.sql`
- 유틸리티 함수: `/src/lib/leaveCalculator.js`
